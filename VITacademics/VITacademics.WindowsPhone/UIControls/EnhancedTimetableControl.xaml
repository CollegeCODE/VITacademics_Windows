<UserControl
    x:Class="VITacademics.UIControls.EnhancedTimetableControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:VITacademics.UIControls"
    xmlns:helpers="using:VITacademics.Helpers"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="720"
    d:DesignWidth="420"
    RequestedTheme="Light">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ms-appx:///Resources/PhoneResources.xaml"></ResourceDictionary>
                <ResourceDictionary>
                    
                    <helpers:EnumerableToVisibilityConverter x:Key="EnumerableToVisibilityConverter"></helpers:EnumerableToVisibilityConverter>
                    
                    <Style TargetType="TextBlock" x:Key="ExtraClassesHeaderBlock" BasedOn="{StaticResource TitleTextBlockStyle}">
                        <Setter Property="Text" Value="EXTRA CLASSES"></Setter>
                    </Style>
                    
                    <Style TargetType="ListView" x:Key="ExtraClassListViewStyle">
                        <Setter Property="IsItemClickEnabled" Value="True"></Setter>
                        <Setter Property="ItemTemplate">
                            <Setter.Value>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Key.Title}" Style="{StaticResource SingleItemHeaderStyle}"></TextBlock>
                                </DataTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                    
                    <DataTemplate x:Key="EmptyDayDataTemplate">
                        <StackPanel>
                            <TextBlock x:Name="textBlock" Text="You have no classes today." Style="{ThemeResource GroupHeaderTextBlockStyle}"></TextBlock>
                            <TextBlock Margin="0,13,0,0" Style="{StaticResource ExtraClassesHeaderBlock}"
                                       Visibility="{Binding ExtraClassDetails, Converter={StaticResource EnumerableToVisibilityConverter}}"></TextBlock>
                            <ListView Style="{StaticResource ExtraClassListViewStyle}"
                                      ItemsSource="{Binding ExtraClassDetails}"></ListView>
                        </StackPanel>
                    </DataTemplate>
                    
                    <DataTemplate x:Key="TodayDataTemplate">
                        <StackPanel>
                            <ListView ItemsSource="{Binding RegularClassDetails}">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,0,0,10">
                                            <TextBlock Text="{Binding Key.Parent.Title}" Style="{StaticResource SingleItemHeaderStyle}"></TextBlock>
                                        </Grid>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                            <TextBlock Style="{StaticResource ExtraClassesHeaderBlock}"
                                       Visibility="{Binding ExtraClassDetails, Converter={StaticResource EnumerableToVisibilityConverter}}"></TextBlock>
                            <ListView Style="{StaticResource ExtraClassListViewStyle}"
                                      ItemsSource="{Binding ExtraClassDetails}"></ListView>
                        </StackPanel>
                    </DataTemplate>
                    
                    <DataTemplate x:Key="RegularDayDataTemplate">
                        <StackPanel>
                            <ListView ItemsSource="{Binding RegularClassDetails}">
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Key}"></TextBlock>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                            <TextBlock Style="{StaticResource ExtraClassesHeaderBlock}"
                                       Visibility="{Binding ExtraClassDetails, Converter={StaticResource EnumerableToVisibilityConverter}}"></TextBlock>
                            <ListView Style="{StaticResource ExtraClassListViewStyle}"
                                      ItemsSource="{Binding ExtraClassDetails}"></ListView>
                        </StackPanel>
                    </DataTemplate>
                    
                </ResourceDictionary>        
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <Pivot x:Name="rootPivot" Style="{StaticResource ContentPivotStyle}"></Pivot>
    
</UserControl>
